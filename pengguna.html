<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIPARKIR-UNILA · Pengguna</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
            :root {
                --bg: #eef4ff;
                --surface: #ffffff;
                --surface-soft: rgba(255, 255, 255, 0.92);
                --primary: #3a6bff;
                --primary-dark: #112752;
                --accent: #6dd3ff;
                --muted: #5c6e94;
                --border: #d3e0ff;
                --radius-lg: 34px;
                --radius-md: 24px;
                --radius-sm: 16px;
                --shadow: 0 18px 40px rgba(42, 92, 181, 0.18);
                --shadow-soft: 0 12px 28px rgba(46, 104, 200, 0.16);
                --success: #28a745;
                --warning: #ffc107;
                --danger: #dc3545;
                --dark-text: #112752;
                --gray-text: #5c6e94;
            }

            *, *::before, *::after {
                box-sizing: border-box;
            }

            body {
                margin: 0;
                font-family: 'Poppins', sans-serif;
                background: var(--bg);
                color: var(--primary-dark);
                line-height: 1.6;
                position: relative;
            }

            body::before,
            body::after {
                content: '';
                position: fixed;
                border-radius: 50%;
                filter: blur(0);
                z-index: 0;
                opacity: 0.7;
            }

            body::before {
                width: 360px;
                height: 360px;
                background: rgba(164, 223, 255, 0.5);
                top: -120px;
                right: -80px;
            }

            body::after {
                width: 280px;
                height: 280px;
                background: rgba(183, 210, 255, 0.55);
                bottom: -90px;
                left: -70px;
            }

            img {
                max-width: 100%;
                display: block;
                height: auto;
            }

            a {
                color: inherit;
                text-decoration: none;
            }

            .top-nav {
                position: sticky;
                top: 0;
                z-index: 200;
                background: rgba(255, 255, 255, 0.92);
                backdrop-filter: saturate(180%) blur(22px);
                border-radius: 0 0 var(--radius-lg) var(--radius-lg);
                box-shadow: 0 18px 40px rgba(35, 79, 158, 0.12);
            }

            .nav-inner {
                max-width: 1200px;
                margin: 0 auto;
                padding: 18px 30px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 24px;
                background: rgba(255, 255, 255, 0.92);
                border-radius: 999px;
                box-shadow: 0 14px 30px rgba(42, 92, 181, 0.16);
                position: relative;
                z-index: 2;
            }

            .brand {
                display: flex;
                align-items: center;
                gap: 14px;
                font-weight: 700;
                color: var(--primary);
            }

            .brand-badge {
                width: 52px;
                height: 52px;
                border-radius: 20px;
                display: grid;
                place-items: center;
                background: linear-gradient(135deg, #6ca4ff, #3a6bff);
                color: #fff;
                font-size: 22px;
                box-shadow: 0 14px 26px rgba(58, 107, 255, 0.3);
            }

            .brand-text {
                display: flex;
                flex-direction: column;
                line-height: 1.2;
            }

            .brand-title {
                font-size: 16px;
                font-weight: 700;
            }

            .brand-subtitle {
                font-size: 12px;
                font-weight: 500;
                color: rgba(17, 39, 82, 0.68);
            }

            .nav-links {
                display: flex;
                align-items: center;
                gap: 14px;
                flex-wrap: wrap;
            }

            .nav-links a {
                padding: 10px 20px;
                font-weight: 600;
                font-size: 14px;
                color: var(--primary-dark);
                background: rgba(150, 188, 255, 0.18);
                border-radius: 999px;
                transition: all 0.25s ease;
                box-shadow: 0 12px 22px rgba(46, 104, 200, 0.14);
            }

            .nav-links a:hover,
            .nav-links a.active {
                color: #fff;
                background: linear-gradient(135deg, var(--accent), var(--primary));
                transform: translateY(-2px);
                box-shadow: 0 16px 30px rgba(58, 107, 255, 0.25);
            }

            .nav-cta {
                padding: 10px 20px;
                border-radius: 999px;
                border: 1px solid rgba(58, 107, 255, 0.28);
                background: rgba(255, 255, 255, 0.4);
                color: var(--primary);
                font-weight: 600;
                display: inline-flex;
                align-items: center;
                gap: 10px;
                box-shadow: 0 12px 22px rgba(42, 92, 181, 0.12);
                cursor: pointer;
                transition: all 0.25s ease;
            }

            .nav-cta:hover {
                background: linear-gradient(135deg, var(--accent), var(--primary));
                color: #fff;
                box-shadow: 0 16px 30px rgba(58, 107, 255, 0.25);
            }

            main {
                max-width: 1200px;
                margin: 0 auto;
                padding: 52px 32px 96px;
                position: relative;
                z-index: 1;
            }

            .hero {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
                gap: 32px;
                background: linear-gradient(140deg, #9ccaff 0%, #5f8dff 48%, #3a6bff 110%);
                border-radius: var(--radius-lg);
                padding: 56px;
                color: #fff;
                position: relative;
                overflow: hidden;
                box-shadow: var(--shadow);
            }

            .hero::before {
                content: '';
                position: absolute;
                width: 320px;
                height: 320px;
                background: rgba(255, 255, 255, 0.16);
                border-radius: 50%;
                top: -140px;
                left: -80px;
            }

            .hero::after {
                content: '';
                position: absolute;
                width: 260px;
                height: 260px;
                background: rgba(255, 255, 255, 0.18);
                border-radius: 50%;
                bottom: -110px;
                right: -70px;
            }

            .hero-text {
                position: relative;
                z-index: 1;
            }

            .hero-text .tag {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: 8px 18px;
                border-radius: 999px;
                background: rgba(255, 255, 255, 0.28);
                font-size: 13px;
                font-weight: 600;
                letter-spacing: 0.5px;
                margin-bottom: 22px;
            }

            .hero-text h1 {
                font-size: 36px;
                line-height: 1.2;
                margin: 0 0 20px;
                font-weight: 700;
            }

            .hero-text p {
                margin: 0 0 28px;
                max-width: 480px;
            }

            .hero-actions {
                display: flex;
                align-items: center;
                gap: 14px;
                flex-wrap: wrap;
            }

            .hero-media {
                position: relative;
                z-index: 1;
                justify-self: center;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 18px;
            }

            .hero-media img {
                width: 320px;
                max-width: 100%;
                border-radius: 18px;
                box-shadow: 0 22px 46px rgba(18, 51, 120, 0.32);
            }

            .profile-chip {
                display: flex;
                align-items: center;
                gap: 12px;
                padding: 10px 16px;
                background: rgba(255, 255, 255, 0.2);
                border-radius: 999px;
                border: 1px solid rgba(255, 255, 255, 0.45);
                backdrop-filter: blur(6px);
            }

            .profile-chip img {
                width: 42px;
                height: 42px;
                border-radius: 50%;
                border: 2px solid rgba(255, 255, 255, 0.8);
            }

            .profile-chip .chip-title {
                font-weight: 600;
                font-size: 14px;
                color: #fff;
            }

            .profile-chip .chip-subtitle {
                font-size: 12px;
                color: rgba(255, 255, 255, 0.86);
            }

            .btn {
                border: none;
                border-radius: 999px;
                padding: 14px 26px;
                font-weight: 600;
                font-size: 14px;
                cursor: pointer;
                transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.25s ease, color 0.25s ease;
                display: inline-flex;
                align-items: center;
                gap: 10px;
            }

            .btn-primary {
                background: linear-gradient(135deg, var(--accent), var(--primary));
                color: #fff;
                box-shadow: 0 18px 36px rgba(52, 104, 214, 0.28);
            }

            .btn-ghost {
                background: rgba(255, 255, 255, 0.22);
                color: #fff;
                border: 1px solid rgba(255, 255, 255, 0.45);
                box-shadow: 0 12px 28px rgba(90, 158, 255, 0.26);
            }

            .btn-outline {
                background: rgba(58, 107, 255, 0.08);
                color: var(--primary);
                border: 1px solid rgba(58, 107, 255, 0.3);
                padding: 12px 22px;
                border-radius: 999px;
            }

            .btn:hover {
                transform: translateY(-2px);
            }

            .btn-primary:hover {
                box-shadow: 0 20px 44px rgba(52, 104, 214, 0.34);
            }

            .btn-ghost:hover {
                background: rgba(255, 255, 255, 0.32);
            }

            .btn-outline:hover {
                background: linear-gradient(135deg, var(--accent), var(--primary));
                color: #fff;
                box-shadow: 0 18px 34px rgba(58, 107, 255, 0.22);
                border-color: transparent;
            }

            .btn-success {
                background: linear-gradient(135deg, #58d58f, #2eb669);
                color: #fff;
            }

            .btn-warning {
                background: linear-gradient(135deg, #ffd76f, #ffb14b);
                color: #6b4200;
            }

            .btn-danger {
                background: linear-gradient(135deg, #ff7a7a, #ff4d4d);
                color: #fff;
            }

            .btn-sm {
                padding: 10px 18px;
                font-size: 13px;
            }

            .btn-block {
                width: 100%;
                justify-content: center;
            }

            .bubble-panel {
                margin-top: 48px;
                background: var(--surface);
                border-radius: var(--radius-lg);
                border: 1px solid rgba(199, 214, 255, 0.7);
                box-shadow: var(--shadow-soft);
                padding: 40px;
                position: relative;
                overflow: hidden;
            }

            .bubble-panel::after {
                content: '';
                position: absolute;
                width: 180px;
                height: 180px;
                background: rgba(109, 211, 255, 0.18);
                border-radius: 50%;
                top: -90px;
                right: -70px;
                pointer-events: none;
            }

            .bubble-panel > * {
                position: relative;
                z-index: 1;
            }

            .section-heading {
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
                gap: 20px;
                flex-wrap: wrap;
                margin-bottom: 28px;
            }

            .section-heading h2 {
                margin: 0 0 6px;
                font-size: 22px;
                font-weight: 600;
                color: var(--primary-dark);
            }

            .section-heading p {
                margin: 0;
                color: var(--muted);
                font-size: 14px;
                max-width: 520px;
            }

            .section-actions {
                display: flex;
                align-items: center;
                gap: 12px;
                flex-wrap: wrap;
            }

            .badge-soft {
                display: inline-flex;
                align-items: center;
                gap: 10px;
                padding: 10px 18px;
                border-radius: 999px;
                background: rgba(109, 211, 255, 0.16);
                color: var(--primary-dark);
                font-weight: 600;
            }

            .record-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
                gap: 22px;
                margin-top: 26px;
            }

            .record-card {
                background: rgba(255, 255, 255, 0.96);
                border-radius: var(--radius-md);
                border: 1px solid rgba(206, 227, 255, 0.65);
                box-shadow: var(--shadow-soft);
                padding: 26px;
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .record-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 14px;
            }

            .record-header h3 {
                margin: 0;
                font-size: 18px;
                font-weight: 600;
                color: var(--primary-dark);
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .record-header span {
                font-size: 12px;
                font-weight: 600;
                color: var(--primary);
                background: rgba(109, 211, 255, 0.22);
                padding: 6px 12px;
                border-radius: 999px;
            }

            .record-form {
                display: grid;
                gap: 16px;
            }

            .record-form .form-group {
                margin: 0;
            }

            .record-actions {
                display: flex;
                flex-wrap: wrap;
                gap: 12px;
                align-items: center;
            }

            .record-actions .btn {
                flex: 1;
                min-width: 150px;
            }

            .table-card {
                background: rgba(255, 255, 255, 0.96);
                border-radius: var(--radius-md);
                border: 1px solid rgba(206, 227, 255, 0.65);
                box-shadow: var(--shadow-soft);
                padding: 24px;
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .table-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 16px;
                flex-wrap: wrap;
            }

            .table-header h3 {
                margin: 0;
                font-size: 18px;
                font-weight: 600;
                color: var(--primary-dark);
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .table-responsive {
                overflow-x: auto;
            }

            table {
                width: 100%;
                border-collapse: collapse;
            }

            th,
            td {
                padding: 14px 16px;
                text-align: left;
                border-bottom: 1px solid rgba(206, 227, 255, 0.7);
                font-size: 14px;
                vertical-align: middle;
            }

            th {
                color: var(--primary-dark);
                font-weight: 600;
                background: rgba(206, 227, 255, 0.45);
            }

            tbody tr:hover {
                background: rgba(109, 211, 255, 0.12);
            }

            .status-badge {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: 8px 14px;
                border-radius: 999px;
                font-weight: 600;
                font-size: 12px;
            }

            .status-active {
                background: rgba(58, 107, 255, 0.16);
                color: var(--primary);
            }

            .status-pending {
                background: rgba(255, 193, 7, 0.18);
                color: #a76100;
            }

            .status-danger {
                background: rgba(220, 53, 69, 0.18);
                color: #a4192f;
            }

            .status-success {
                background: rgba(88, 213, 143, 0.22);
                color: #1f7a4d;
            }

            .form-group {
                display: flex;
                flex-direction: column;
                gap: 10px;
                margin-bottom: 18px;
            }

            .form-group label {
                margin: 0;
                color: var(--primary-dark);
                font-weight: 600;
                font-size: 14px;
            }

            .form-control {
                width: 100%;
                padding: 14px 18px;
                border: 2px solid rgba(201, 219, 255, 0.8);
                border-radius: 14px;
                background: #fff;
                color: var(--primary-dark);
                font-size: 14px;
                transition: all 0.25s ease;
            }

            .form-control:focus {
                outline: none;
                border-color: var(--primary);
                box-shadow: 0 0 0 4px rgba(58, 107, 255, 0.18);
            }

            .upload-area {
                border: 2px dashed rgba(201, 219, 255, 0.8);
                border-radius: 14px;
                padding: 30px;
                text-align: center;
                background: rgba(109, 211, 255, 0.08);
                cursor: pointer;
                transition: all 0.25s ease;
            }

            .upload-area:hover {
                border-color: var(--primary);
                background: rgba(109, 211, 255, 0.14);
            }

            .upload-area i {
                font-size: 48px;
                color: var(--primary);
                margin-bottom: 14px;
            }

            .upload-area p {
                margin: 0;
                color: var(--muted);
                font-size: 14px;
            }

            .upload-area input[type="file"] {
                display: none;
            }

            @media (max-width: 1024px) {
                .nav-inner {
                    flex-direction: column;
                    align-items: stretch;
                }

                .nav-links {
                    width: 100%;
                    justify-content: center;
                }

                .nav-links a {
                    width: 100%;
                    text-align: center;
                }

                .nav-cta {
                    width: 100%;
                    justify-content: center;
                }
            }

            @media (max-width: 768px) {
                main {
                    padding: 38px 20px 80px;
                }

                .hero {
                    padding: 40px 28px;
                }

                .bubble-panel {
                    padding: 32px 24px;
                }
            }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-inner">
            <a href="pengguna.html" class="brand">
                <span class="brand-badge"><i class="fas fa-parking"></i></span>
                <div class="brand-text">
                    <span class="brand-title">SIPARKIR UNILA</span>
                    <span class="brand-subtitle">Portal Pengguna</span>
                </div>
            </a>
            <div class="nav-links">
                <a href="#registrasi-kendaraan" class="active">Registrasi Kendaraan</a>
                <a href="#parkir-masuk">Parkir Masuk</a>
                <a href="#parkir-keluar">Parkir Keluar</a>
                <a href="#lapor-kehilangan">Lapor Kehilangan</a>
            </div>
            <a class="nav-cta" href="login.html"><i class="fas fa-sign-out-alt"></i> Keluar</a>
        </div>
    </nav>

    <main>
        <section class="hero" id="registrasi-kendaraan">
            <div class="hero-text">
                <span class="tag"><i class="fas fa-circle"></i> Registrasi Kendaraan</span>
                <h1>Daftarkan kendaraan Anda untuk parkir di kampus dengan mudah dan aman.</h1>
                <p>Lengkapi data kendaraan Anda untuk mendapatkan izin parkir. Proses registrasi hanya memerlukan beberapa langkah sederhana.</p>
                <div class="hero-actions">
                    <button class="btn btn-primary" onclick="document.getElementById('form-registrasi').scrollIntoView({ behavior: 'smooth' })"><i class="fas fa-plus-circle"></i> Daftar Kendaraan</button>
                    <button class="btn btn-ghost" onclick="document.getElementById('parkir-masuk').scrollIntoView({ behavior: 'smooth' })"><i class="fas fa-sign-in-alt"></i> Check-In Parkir</button>
                </div>
            </div>
            <div class="hero-media">
                <img src="https://img.freepik.com/free-vector/parking-concept-illustration_114360-8499.jpg" alt="Ilustrasi parkir kampus">
                <div class="profile-chip">
                    <img src="https://ui-avatars.com/api/?name=Andi+Pratama&background=3A6BFF&color=fff&bold=true" alt="Andi Pratama">
                    <div>
                        <div class="chip-title">Andi Pratama</div>
                        <div class="chip-subtitle">pengguna</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="bubble-panel" id="form-registrasi">
            <div class="section-heading">
                <div>
                    <h2>Registrasi Kendaraan Baru</h2>
                    <p>Daftarkan kendaraan pribadi Anda dengan melengkapi informasi di bawah ini. Pastikan data yang diinput sudah benar.</p>
                </div>
                <div class="section-actions">
                    <span class="badge-soft"><i class="fas fa-car"></i> Form Pendaftaran</span>
                </div>
            </div>
            <div class="record-grid">
                <article class="record-card">
                    <div class="record-header">
                        <h3><i class="fas fa-clipboard-list"></i> Data Kendaraan</h3>
                        <span>Wajib Diisi</span>
                    </div>
                    <form class="record-form" onsubmit="return false;">
                        <div class="form-group">
                            <label for="platNomor">Plat Nomor Kendaraan</label>
                            <input type="text" id="platNomor" class="form-control" placeholder="B 1234 ABC" required>
                        </div>
                        <div class="form-group">
                            <label for="merkKendaraan">Merk Kendaraan</label>
                            <input type="text" id="merkKendaraan" class="form-control" placeholder="Honda, Yamaha, Toyota, dll." required>
                        </div>
                        <div class="form-group">
                            <label for="tipeKendaraan">Tipe Kendaraan</label>
                            <input type="text" id="tipeKendaraan" class="form-control" placeholder="Beat, NMAX, Avanza, dll." required>
                        </div>
                        <div class="form-group">
                            <label for="warnaKendaraan">Warna Kendaraan</label>
                            <input type="text" id="warnaKendaraan" class="form-control" placeholder="Hitam, Putih, Merah, dll." required>
                        </div>
                        <div class="form-group">
                            <label for="tahunKendaraan">Tahun Pembuatan</label>
                            <input type="number" id="tahunKendaraan" class="form-control" placeholder="2022" min="1980" max="2025" required>
                        </div>
                        <div class="form-group">
                            <label for="fotoKendaraan">Foto Dokumen (STNK/KTP)</label>
                            <div class="upload-area" onclick="document.getElementById('fotoKendaraan').click()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p><strong>Klik untuk upload foto</strong><br>Format: JPG, PNG (Max 2MB)</p>
                                <input type="file" id="fotoKendaraan" accept="image/*">
                            </div>
                            <small class="form-text text-muted">Upload foto STNK dan KTP untuk verifikasi</small>
                        </div>
                        <div class="record-actions">
                            <button type="submit" class="btn btn-primary btn-sm"><i class="fas fa-save"></i> Daftar Kendaraan</button>
                            <button type="reset" class="btn btn-outline btn-sm"><i class="fas fa-eraser"></i> Reset Form</button>
                        </div>
                    </form>
                </article>
                <article class="table-card">
                    <div class="table-header">
                        <h3><i class="fas fa-car-side"></i> Kendaraan Terdaftar</h3>
                    </div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Plat Nomor</th>
                                    <th>Merk/Tipe</th>
                                    <th>Warna</th>
                                    <th>Tahun</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>B 1234 ABC</strong></td>
                                    <td>Honda Beat</td>
                                    <td>Hitam</td>
                                    <td>2020</td>
                                    <td><span class="status-badge status-success">Aktif</span></td>
                                </tr>
                                <tr>
                                    <td><strong>B 5678 XYZ</strong></td>
                                    <td>Yamaha NMAX</td>
                                    <td>Putih</td>
                                    <td>2021</td>
                                    <td><span class="status-badge status-success">Aktif</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </article>
            </div>
        </section>

        <section class="bubble-panel" id="lapor-kehilangan">
            <div class="section-heading">
                <div>
                    <h2>Lapor Kehilangan Kendaraan</h2>
                    <p>Jika kendaraan Anda hilang di area kampus, segera laporkan dengan mengisi formulir di bawah ini.</p>
                </div>
                <div class="section-actions">
                    <span class="badge-soft"><i class="fas fa-exclamation-triangle"></i> Laporan</span>
                </div>
            </div>
            <div class="record-grid">
                <article class="record-card">
                    <div class="record-header">
                        <h3><i class="fas fa-file-alt"></i> Form Laporan Kehilangan</h3>
                        <span class="status-badge status-danger">Urgent</span>
                    </div>
                    <form class="record-form" onsubmit="return false;">
                        <div class="form-group">
                            <label for="kendaraanHilang">Pilih Kendaraan yang Hilang</label>
                            <select id="kendaraanHilang" class="form-control" required>
                                <option value="" disabled selected>Pilih kendaraan</option>
                                <option>B 1234 ABC - Honda Beat</option>
                                <option>B 5678 XYZ - Yamaha NMAX</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="lokasiHilang">Lokasi Terakhir Parkir</label>
                            <select id="lokasiHilang" class="form-control" required>
                                <option value="" disabled selected>Pilih lokasi</option>
                                <option>Parkiran A - Gedung Rektorat</option>
                                <option>Parkiran B - Fakultas Teknik</option>
                                <option>Parkiran C - Fakultas Ekonomi</option>
                                <option>Gerbang Teknik</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="waktuHilang">Waktu Kejadian</label>
                            <input type="datetime-local" id="waktuHilang" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="kronologiHilang">Deskripsi Kronologi</label>
                            <textarea id="kronologiHilang" class="form-control" rows="4" placeholder="Jelaskan secara detail kronologi kehilangan kendaraan Anda..." required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="buktiPendukung">Bukti Pendukung (Opsional)</label>
                            <div class="upload-area" onclick="document.getElementById('buktiPendukung').click()">
                                <i class="fas fa-camera"></i>
                                <p><strong>Upload foto lokasi parkir terakhir</strong><br>Format: JPG, PNG (Max 5MB)</p>
                                <input type="file" id="buktiPendukung" accept="image/*" multiple>
                            </div>
                        </div>
                        <div class="record-actions">
                            <button type="submit" class="btn btn-danger btn-sm"><i class="fas fa-paper-plane"></i> Kirim Laporan</button>
                            <button type="reset" class="btn btn-outline btn-sm"><i class="fas fa-times"></i> Batal</button>
                        </div>
                    </form>
                </article>
                <article class="table-card">
                    <div class="table-header">
                        <h3><i class="fas fa-list-alt"></i> Status Laporan Anda</h3>
                    </div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tanggal</th>
                                    <th>Kendaraan</th>
                                    <th>Lokasi</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>28 Nov 2025</td>
                                    <td><strong>B 9012 DEF</strong></td>
                                    <td>Parkiran C</td>
                                    <td><span class="status-badge status-pending">Dalam Investigasi</span></td>
                                </tr>
                                <tr>
                                    <td>15 Nov 2025</td>
                                    <td><strong>B 3456 GHI</strong></td>
                                    <td>Parkiran A</td>
                                    <td><span class="status-badge status-success">Ditemukan</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </article>
            </div>
        </section>

        <section class="bubble-panel" id="parkir-masuk">
            <div class="section-heading">
                <div>
                    <h2>Melakukan Parkir (Check-In)</h2>
                    <p>Catat kendaraan Anda saat memasuki area parkir kampus untuk mendapatkan tiket parkir.</p>
                </div>
                <div class="section-actions">
                    <span class="badge-soft"><i class="fas fa-sign-in-alt"></i> Parkir Masuk</span>
                </div>
            </div>
            <div class="record-grid">
                <article class="record-card">
                    <div class="record-header">
                        <h3><i class="fas fa-parking"></i> Form Check-In Parkir</h3>
                        <span>Catat Masuk</span>
                    </div>
                    <form class="record-form" id="form-parkir-masuk" onsubmit="return false;">
                        <div class="form-group">
                            <label for="kendaraanMasuk">Pilih Kendaraan</label>
                            <select id="kendaraanMasuk" class="form-control" required>
                                <option value="" disabled selected>Pilih kendaraan terdaftar</option>
                                <option>B 1234 ABC - Honda Beat (Hitam)</option>
                                <option>B 5678 XYZ - Yamaha NMAX (Putih)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="lokasiParkirMasuk">Lokasi Parkir</label>
                            <select id="lokasiParkirMasuk" class="form-control" required>
                                <option value="" disabled selected>Pilih lokasi parkir</option>
                                <option>Parkiran A - Gedung Rektorat</option>
                                <option>Parkiran B - Fakultas Teknik</option>
                                <option>Parkiran C - Fakultas Ekonomi</option>
                                <option>Parkiran D - Perpustakaan</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="waktuMasuk">Waktu Masuk</label>
                            <input type="datetime-local" id="waktuMasuk" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="catatanMasuk">Catatan (Opsional)</label>
                            <textarea id="catatanMasuk" class="form-control" rows="3" placeholder="Tambahkan catatan jika diperlukan"></textarea>
                        </div>
                        <div class="record-actions">
                            <button type="submit" class="btn btn-primary"><i class="fas fa-check"></i> Konfirmasi Check-In</button>
                        </div>
                    </form>
                </article>
                <article class="table-card">
                    <div class="table-header">
                        <h3><i class="fas fa-car"></i> Kendaraan Parkir Aktif</h3>
                    </div>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Kendaraan</th>
                                    <th>Lokasi</th>
                                    <th>Waktu Masuk</th>
                                    <th>Durasi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>B 1234 ABC</strong></td>
                                    <td>Parkiran A</td>
                                    <td>07:30 AM</td>
                                    <td><span class="status-badge status-active">4 jam 15 menit</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </article>
            </div>
        </section>

        <section class="bubble-panel" id="parkir-keluar">
            <div class="section-heading">
                <div>
                    <h2>Melakukan Keluar Parkir (Check-Out)</h2>
                    <p>Catat kendaraan Anda saat keluar dari area parkir kampus untuk menyelesaikan sesi parkir.</p>
                </div>
                <div class="section-actions">
                    <span class="badge-soft"><i class="fas fa-sign-out-alt"></i> Parkir Keluar</span>
                </div>
            </div>
            <article class="record-card">
                <div class="record-header">
                    <h3><i class="fas fa-car-side"></i> Form Check-Out Parkir</h3>
                    <span>Catat Keluar</span>
                </div>
                <form class="record-form" id="form-parkir-keluar" onsubmit="return false;">
                    <div class="form-group">
                        <label for="kendaraanKeluar">Pilih Kendaraan Parkir Aktif</label>
                        <select id="kendaraanKeluar" class="form-control" required>
                            <option value="" disabled selected>Pilih kendaraan yang akan keluar</option>
                            <option>B 1234 ABC - Parkiran A (Masuk: 07:30 AM)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="waktuKeluar">Waktu Keluar</label>
                        <input type="datetime-local" id="waktuKeluar" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Ringkasan Parkir</label>
                        <div style="background: rgba(58, 107, 255, 0.08); padding: 16px; border-radius: 12px; margin-top: 8px;">
                            <p style="margin: 0 0 8px 0; font-size: 14px; color: var(--primary-dark);"><strong>Durasi:</strong> <span id="durasiParkir">-</span></p>
                            <p style="margin: 0; font-size: 14px; color: var(--primary-dark);"><strong>Biaya:</strong> <span id="biayaParkir">Gratis (Civitas Akademika)</span></p>
                        </div>
                    </div>
                    <div class="record-actions">
                        <button type="submit" class="btn btn-success"><i class="fas fa-check-circle"></i> Konfirmasi Check-Out</button>
                    </div>
                </form>
            </article>
        </section>

    </main>

    <script>
        // Cek login dari localStorage
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (!currentUser || currentUser.role !== 'pengguna') {
            alert('⛔ Anda harus login terlebih dahulu!');
            window.location.href = 'login.html';
        }

        // Load data pengguna dengan API
        async function loadUserData() {
            try {
                // Get kendaraan milik user
                const resKendaraan = await fetch(`api/kendaraan.php?id_pengguna=${currentUser.id}`);
                const dataKendaraan = await resKendaraan.json();
                const kendaraanList = dataKendaraan.success ? dataKendaraan.data : [];

                // Get riwayat parkir aktif
                const resRiwayat = await fetch(`api/riwayat_parkir.php?status=aktif`);
                const dataRiwayat = await resRiwayat.json();
                const riwayatAktif = dataRiwayat.success ? dataRiwayat.data.filter(r => r.id_pengguna === currentUser.id) : [];

                // Get laporan kehilangan user
                const resLaporan = await fetch(`api/laporan.php?id_pengguna=${currentUser.id}`);
                const dataLaporan = await resLaporan.json();
                const laporanUser = dataLaporan.success ? dataLaporan.data : [];

                // Update dropdown kendaraan di parkir masuk
                const selectMasuk = document.getElementById('kendaraanMasuk');
                selectMasuk.innerHTML = '<option value="" disabled selected>Pilih kendaraan terdaftar</option>';
                kendaraanList.filter(k => k.status_parkir === 'aktif').forEach(k => {
                    selectMasuk.innerHTML += `<option value="${k.id_kendaraan}">${k.plat_nomor} - ${k.merk} ${k.tipe} (${k.warna})</option>`;
                });

                // Update dropdown kendaraan di parkir keluar
                const selectKeluar = document.getElementById('kendaraanKeluar');
                selectKeluar.innerHTML = '<option value="" disabled selected>Pilih kendaraan yang akan keluar</option>';
                riwayatAktif.forEach(r => {
                    const waktuMasuk = new Date(r.waktu_masuk).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
                    selectKeluar.innerHTML += `<option value="${r.id_riwayat}">${r.plat_nomor} - ${r.lokasi_parkir} (Masuk: ${waktuMasuk})</option>`;
                });

                // Update dropdown kendaraan di lapor kehilangan
                const selectLapor = document.getElementById('kendaraanHilang');
                selectLapor.innerHTML = '<option value="" disabled selected>Pilih kendaraan yang hilang</option>';
                kendaraanList.forEach(k => {
                    selectLapor.innerHTML += `<option value="${k.id_kendaraan}">${k.plat_nomor} - ${k.merk} ${k.tipe}</option>`;
                });

                // Update tabel kendaraan terdaftar
                const tbody = document.querySelector('#form-registrasi table tbody');
                tbody.innerHTML = '';
                kendaraanList.forEach(k => {
                    const statusBadge = k.status_parkir === 'aktif' ? 'status-success' : 'status-pending';
                    const statusText = k.status_parkir === 'aktif' ? 'Aktif' : 'Pending';
                    tbody.innerHTML += `
                        <tr>
                            <td><strong>${k.plat_nomor}</strong></td>
                            <td>${k.merk} ${k.tipe}</td>
                            <td>${k.warna}</td>
                            <td>${k.tahun_pembuatan}</td>
                            <td><span class="status-badge ${statusBadge}">${statusText}</span></td>
                        </tr>
                    `;
                });

                // Update tabel parkir aktif
                const tbodyParkir = document.querySelector('#parkir-masuk table tbody');
                tbodyParkir.innerHTML = '';
                riwayatAktif.forEach(r => {
                    const waktuMasuk = new Date(r.waktu_masuk);
                    const now = new Date();
                    const durasiMenit = Math.floor((now - waktuMasuk) / (1000 * 60));
                    const jam = Math.floor(durasiMenit / 60);
                    const menit = durasiMenit % 60;
                    const durasi = `${jam} jam ${menit} menit`;
                    const waktuStr = waktuMasuk.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });

                    tbodyParkir.innerHTML += `
                        <tr>
                            <td><strong>${r.plat_nomor}</strong></td>
                            <td>${r.lokasi_parkir}</td>
                            <td>${waktuStr}</td>
                            <td><span class="status-badge status-active">${durasi}</span></td>
                        </tr>
                    `;
                });

                // Update tabel laporan kehilangan
                const tbodyLaporan = document.querySelector('#lapor-kehilangan table tbody');
                tbodyLaporan.innerHTML = '';
                laporanUser.forEach(l => {
                    const tanggal = new Date(l.tanggal_laporan).toLocaleDateString('id-ID');
                    const statusClass = l.status_laporan === 'Selesai' ? 'status-success' : l.status_laporan.includes('Investig') ? 'status-pending' : 'status-active';
                    
                    tbodyLaporan.innerHTML += `
                        <tr>
                            <td><strong>${l.id_laporan}</strong></td>
                            <td>${l.plat_nomor}</td>
                            <td>${tanggal}</td>
                            <td>${l.lokasi_kehilangan}</td>
                            <td><span class="status-badge ${statusClass}">${l.status_laporan}</span></td>
                        </tr>
                    `;
                });
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        // Navigation
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', function(event) {
                const target = this.getAttribute('href');
                if (target && target.startsWith('#')) {
                    event.preventDefault();
                    document.querySelectorAll('.nav-links a').forEach(item => item.classList.remove('active'));
                    this.classList.add('active');
                    const section = document.querySelector(target);
                    if (section) {
                        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
            });
        });

        // Handle registrasi kendaraan
        document.querySelector('#form-registrasi form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Memproses...';
            
            try {
                const formData = {
                    id_pengguna: currentUser.id,
                    plat_nomor: document.getElementById('platNomor').value,
                    merk: document.getElementById('merkKendaraan').value,
                    tipe: document.getElementById('tipeKendaraan').value,
                    warna: document.getElementById('warnaKendaraan').value,
                    tahun_pembuatan: parseInt(document.getElementById('tahunKendaraan').value),
                    foto_kendaraan: document.getElementById('fotoKendaraan').value || null
                };

                const response = await fetch('api/kendaraan.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();
                
                if (result.success) {
                    alert('✅ Kendaraan berhasil didaftarkan!');
                    this.reset();
                    await loadUserData();
                } else {
                    alert('❌ Gagal mendaftarkan kendaraan: ' + result.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('❌ Terjadi kesalahan saat mendaftarkan kendaraan');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Daftarkan Kendaraan';
            }
        });

        // Handle lapor kehilangan
        document.querySelector('#lapor-kehilangan form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Mengirim...';
            
            try {
                const laporanData = {
                    id_pengguna: currentUser.id,
                    id_kendaraan: document.getElementById('kendaraanHilang').value,
                    waktu_kejadian: document.getElementById('waktuHilang').value,
                    lokasi_kehilangan: document.getElementById('lokasiHilang').value,
                    deskripsi: document.getElementById('kronologiHilang').value
                };

                const response = await fetch('api/laporan.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(laporanData)
                });

                const result = await response.json();
                
                if (result.success) {
                    alert('✅ Laporan kehilangan berhasil dikirim!\n\nPetugas keamanan akan segera menindaklanjuti.');
                    this.reset();
                    await loadUserData();
                } else {
                    alert('❌ Gagal mengirim laporan: ' + result.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('❌ Terjadi kesalahan saat mengirim laporan');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Kirim Laporan';
            }
        });

        // Handle check-in parkir
        document.getElementById('form-parkir-masuk').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Memproses...';
            
            try {
                const transaksiData = {
                    action: 'masuk',
                    id_kendaraan: document.getElementById('kendaraanMasuk').value,
                    lokasi_parkir: document.getElementById('lokasiParkirMasuk').value
                };

                const response = await fetch('api/riwayat_parkir.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(transaksiData)
                });

                const result = await response.json();
                
                if (result.success) {
                    alert('✅ Check-In berhasil!\n\nKendaraan Anda telah tercatat masuk area parkir.');
                    this.reset();
                    await loadUserData();
                } else {
                    alert('❌ Check-In gagal: ' + result.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('❌ Terjadi kesalahan saat check-in');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Check-In';
            }
        });

        // Handle check-out parkir
        document.getElementById('form-parkir-keluar').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Memproses...';
            
            try {
                const transaksiData = {
                    action: 'keluar',
                    id_riwayat: document.getElementById('kendaraanKeluar').value
                };

                const response = await fetch('api/riwayat_parkir.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(transaksiData)
                });

                const result = await response.json();
                
                if (result.success) {
                    alert('✅ Check-Out berhasil!\n\nTerima kasih telah menggunakan layanan parkir kampus.');
                    this.reset();
                    await loadUserData();
                } else {
                    alert('❌ Check-Out gagal: ' + result.message);
                }
            } catch (error) {
                console.error('Error:', error);
                alert('❌ Terjadi kesalahan saat check-out');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Check-Out';
            }
        });

        // Load data saat halaman dimuat
        loadUserData();

        // Refresh data setiap 30 detik
        setInterval(loadUserData, 30000);
    </script>
</body>
</html>
